[program:tcp_main]
command=/www/wwwroot/syswaw/.venv/bin/python /www/wwwroot/syswaw/python/server/tcp_main.py
directory=/www/wwwroot/syswaw/python/server
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=10
killasgroup=true
stopasgroup=true
user=www
redirect_stderr=true
numprocs=1
process_name=%(program_name)s
stdout_logfile=/www/wwwroot/syswaw/storage/logs/tcp_main.out.log
loglevel=info
environment=PATH="/www/wwwroot/syswaw/.venv/bin",VIRTUAL_ENV="/www/wwwroot/syswaw/.venv"
priority=2
# 常駐sudo **supervisorctl start tcp_main**
#   主服務監聽redis頻道tcp_server_cmd 例如start 啟動tcp_server
#   啟動tcp_server後 -> 廣播redis頻道tcp_server_status
#   之後由larevel 接管,監聽redis頻道tcp_server_status (redis:subscribe)
#   必須要常駐redis:subscribe 簽注在class(class SubscribeToRedis extends Command)
# 常駐執行 **sudo supervisorctl start tcp_status**
# redis頻道有變化時觸發 reverb 推送到前端